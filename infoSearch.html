<!DOCTYPE html>
<html>
<head>
	<title>Marvel</title>
	<style type="text/css">
	.hero-container{
		border-style: solid;
    	border-width: 5px;
    	padding: 10px;
		float: left;
		margin-right: 20px;
		margin-bottom: 20px;
		background-color: #87CEEB;
		width: 180px;
		height: 320px;
	}
	</style>
</head>
	<body>
		<h2>Search Results...</h2>
		<div id="DynamicContent" class="container">

		</div>
		<p id="info"></p>
	</body>
	<script type="text/javascript" src="./js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript">

		$(document).ready(function(){
			var txt = sessionStorage.getItem('myKeyName');
			console.log("Text:::: " + txt);
				var api = require('marvel-api');

		      var marvel = api.createClient({

		        publicKey: 'e0c049e996366ea0bc70bd833e03d31f',
		        privateKey: 'c27d45753f1d2a071cea0a7e40a23bd3fad7e16e'

		      });	      

		      marvel.characters.findByName(txt,function(err, results) {
			        if (err) {
			          return console.error(err);
			        }
			        if(results.data.length === 0){
			        	$("#DynamicContent").append("Couldnt find any superheroes...");
			        	return;
			        }
			        var len = 0;
			        var data = results.data;

			        function createCallback(str){
			          return function(){
			            sessionStorage.setItem('myKeyId',str);
			            window.open('./infoPage.html',"_self");
			          }
			        }

			      	for(var i=0;i<data.length;i++){ 
				        var $div = $("<div>",{ class: "hero-container"});
				        $div.click(createCallback(data[i].id.toString()));

				        var $p = $("<p>").append(data[i].name.toString());
				        var str1 = data[i].thumbnail.path.toString();
				        var str2 = "/portrait_fantastic.jpg";
				        var imgPath = str1.concat(str2);
				        var $img = $("<img>",{ src: imgPath.toString() });

				        $div.append($img);
				        $div.append($p);

				        $("#DynamicContent").append($div);
				                   
				        len++;
			      }
		    });
		    
		});	
	</script>	
</html>

